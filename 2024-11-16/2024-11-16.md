# www(웹)를 이용할 때는 이렇게 데이터를 주고받는다

<aside>
✏️

HTTP 프로토콜

- HTTP(HTTPS -> SSL/TLS)
- HTML
- Javascript
- CSS
- ASP/ASP.NET
- JSP
- PHP
- DB
- Python
- Spring
- Jquery
- Ajax

HTTP 프로토콜의 특징

- HTTP
    - HyperText Transfet Protocol(하이퍼 텍스트 전송 프로토콜)
    - www에서 쓰이는 핵심 프로토콜로 문서의 전송을 위해 쓰이며, 오늘 날 거의 모든 웹 애플리케이션에서 사용되고 있다. -> 음성, 화상 등 여러 종류의 데이터를 MIME로 정의하여 전송이 가능하다.
    - Request/Response(요청/응답) 동작에 기반하여 서비스를 제공한다.
- HTTP 1.0
    - "연결 수립, 동작, 연결 해제"의 단순함이 특징 -> 하나의 URL은 하나의 TCP 연결
    - HTML 문서를 전송 받은 뒤 연결을 끊고 다시 연결하여 데이터를 전송한다.
    - 단순 동작(연결 수립, 동작, 연결 해제)이 반복되어 통신 부하 문제 발생
- HTTP 1.1
    - HTTP 1.0과 호환 가능
    - Multiple Request 처리가 가능하여 Client의 Request가 많을 경우 연속적인 응답 제공 -> Pipeline 방식의 Request/Response 진행
    - HTTP 1.0과는 달리 Server가 갖는 하나의 IP Address와 다수의 Web Site 연결 가능
    - 빠른 속도와 Internet Protocol 설계에 최적화 될 수 있도록 Cache 사용
    - Data를 압축해서 전달이 가능하도록 하여 전달하는 Data 양이 감소

HTTP 요청 프로토콜의 구조

: 요청하는 방식을 정의하고 클라이언트의 정보를 담고 있음

HTTP 메소드

1. **GET** : 리소스를 조회
2. **POST** : 데이터 추가, 등록
3. **PUT** : 리소스 대체, 수정
4. **DELETE** : 리소스 삭제
5. **PATCH** : 리소스 부분 변경
6. **HEAD** : GET과 동일 but HTTP 메세지의 body 제외 후 조회
7. **OPTIONS** : 서버와 브라우저가 통신하기 위한 통신 옵션 확인
8. **CONNECT** : 대상 자원으로 식별되는 서버에 대한 연결 요청

<aside>
1️⃣

**GET 메서드**
리소스를 조회하는 메서드
멱등성의 특징 : 여러번 조회 요청해도 리소스는 변하지 않는다.
GET 요청에서 서버에 데이터를 전달할 경우, 쿼리스트링을 통해서만 전달된다.
but 쿼리스트링은 클라이언트에게 전달하는 데이터 정보가 무방비하게 노출됨
(쿼리스트링 : 요청 url의 포함된다)

</aside>

<aside>
2️⃣ **POST 메서드**
새로운 리소스를 생성하는 메서드
성공적으로 create가 되면 201 HTTP 응답을 반환한다.
데이터를 메세지 body에 쿼리 파라미터 형식으로 전달된다.
(쿼리 파라미터 : key - value 형식)

</aside>

<aside>
3️⃣ **PUT 메서드**
리소스를 완전히 대체하는 메서드
클라이언트가 리소스를 식별할 수 있다.
부분 수정이 불가하다.
(A,B라는 데이터가 기존에 있는데 C를 담아 요청을 보내면 A,B는 사라지고 C로 대체됨)
멱등성의 특징 : 여러번 조회 요청해도 리소스는 변하지 않는다.

</aside>

<aside>
4️⃣ **PATCH 메서드**
리소스를 부분 변경하는 메서드
PATCH 메서드를 지원하지 않는 서버도 있는데, 그럴 경우 POST를 사용한다

</aside>

<aside>
5️⃣ **DELETE 메서드**
리소스를 제거하는 메서드
멱등성의 특징 : 여러번 조회 요청해도 리소스는 변하지 않는다.

</aside>

HTTP 응답 프로토콜의 구조

: 사용자가 볼 웹 페이지를 담고있는 응답 프로토콜 구조

상태 코드

1. 100 ~ 199 : 단순한 정보
2. 200 ~ 299 : Client의 요청이 성공
3. 300 ~ 399 : Client의 요청이 수행되지 않아 다른 URL로 재지정
4. 400 ~ 499 : Client의 요청이 불완전하여 다른 정보가 필요
5. 500 ~ 599 : Server의 오류를 만나거나 Client의 요청 수행 불가

<aside>
1️⃣

**200 OK**

요청이 성공적으로 되었습니다.

**201 Created**

요청이 성공적이었으며 그 결과로 새로운 리소스가 생성되었습니다

**202 Accepted**

요청을 수신하였지만 그에 응하여 행동할 수 없습니다.

**203 Non-Authoritative Information**

돌려받은 메타 정보 세트가 오리진 서버의 것과 일치하지 않지만 로컬이나 서드 파티 복사본에서 모아졌음을 의미합니다.

**204 No Content**

요청에 대해서 보내줄 수 있는 콘텐츠가 없지만, 헤더는 의미있을 수 있습니다.

**205 Reset Content**

이 응답 코드는 요청을 완수한 이후에 사용자 에이전트에게 이 요청을 보낸 문서 뷰를 리셋하라고 알려줍니다.

</aside>

<aside>
2️⃣

**300 Multiple Choice**

요청에 대해서 하나 이상의 응답이 가능합니다.

**301 Moved Permanently**

이 응답 코드는 요청한 리소스의 URI가 변경되었음을 의미합니다.

</aside>

<aside>
3️⃣

**400 Bad Request**

이 응답은 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음을 의미합니다.

**401 Unauthorized**

비록 HTTP 표준에서는 "미승인(unauthorized)"를 명확히 하고 있지만, 의미상 이 응답은 "비인증(unauthenticated)"을 의미합니다.

**402 Payment Required**

이 응답 코드는 나중에 사용될 것을 대비해 예약되었습니다.

**403 Forbidden**

클라이언트는 콘텐츠에 접근할 권리를 가지고 있지 않습니다.

**404 Not Found**

서버는 요청받은 리소스를 찾을 수 없습니다.

**405 Method Not Allowed**

요청한 메소드는 서버에서 알고 있지만, 제거되었고 사용할 수 없습니다.

**408 Request Timeout**

이 응답은 요청을 한지 시간이 오래된 연결에 일부 서버가 전송하며, 어떨 때에는 이전에 클라이언트로부터 어떠한 요청이 없었다고 하더라도 보내지기도 합니다.

**409 Coflict**

이 응답은 요청이 현재 서버의 상태와 충돌될 때 보냅니다.

</aside>

<aside>
4️⃣

**500 Internal Server Error**

서버가 처리 방법을 모르는 상황이 발생했습니다.

**501 Not Implemented**

요청 방법은 서버에서 지원되지 않으므로 처리할 수 없습니다.

**502 Bad Gateway**

이 오류 응답은 서버가 요청을 처리하는데 필요한 응답을 얻기 위해 게이트웨이로 작업하는 동안 잘못된 응답을 수신했음을 의미합니다.

**503 Service Unavailable**

서버가 요청을 처리할 준비가 되지 않았습니다.

</aside>

HTTP 헤더 구조

- 일반 헤더 : 일반적인 정보를 담고 있는 일반 헤더
    - Content-Length : 메시지 바디 길이
    - Content-Type : 메시지 바디에 들어있는 컨텐츠 종류
- 요청 헤더 : 클라이언트 정보를 담고 있는 요청 헤더
    - Cookie : 서버로부터 받은 쿠키를 다시 서버에게 보내줌
    - Host : 요청된 URL에 나타난 호스트명을 표시
    - User-Agent : Client Program에 대한 식별 가능 정보 제공
- 응답 헤더 : 서버 정보를 담고 있는 응답 헤더
    - Server : 사용하고 있는 웹서버의 소프트웨어에 대한 정보
    - Set-Cookie : 쿠키를 생성하고 브라우저에 보낼 때 사용
</aside>